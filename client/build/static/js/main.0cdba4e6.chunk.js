(this.webpackJsonpreadings=this.webpackJsonpreadings||[]).push([[0],{17:function(e,A){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gKgSUNDX1BST0ZJTEUAAQEAAAKQbGNtcwQwAABtbnRyUkdCIFhZWiAH3gAKABYADwAWABthY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtkZXNjAAABCAAAADhjcHJ0AAABQAAAAE53dHB0AAABkAAAABRjaGFkAAABpAAAACxyWFlaAAAB0AAAABRiWFlaAAAB5AAAABRnWFlaAAAB+AAAABRyVFJDAAACDAAAACBnVFJDAAACLAAAACBiVFJDAAACTAAAACBjaHJtAAACbAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAABwAAAAcAHMAUgBHAEIAIABiAHUAaQBsAHQALQBpAG4AAG1sdWMAAAAAAAAAAQAAAAxlblVTAAAAMgAAABwATgBvACAAYwBvAHAAeQByAGkAZwBoAHQALAAgAHUAcwBlACAAZgByAGUAZQBsAHkAAAAAWFlaIAAAAAAAAPbWAAEAAAAA0y1zZjMyAAAAAAABDEoAAAXj///zKgAAB5sAAP2H///7ov///aMAAAPYAADAlFhZWiAAAAAAAABvlAAAOO4AAAOQWFlaIAAAAAAAACSdAAAPgwAAtr5YWVogAAAAAAAAYqUAALeQAAAY3nBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltwYXJhAAAAAAADAAAAAmZmAADypwAADVkAABPQAAAKW2Nocm0AAAAAAAMAAAAAo9cAAFR7AABMzQAAmZoAACZmAAAPXP/bAEMABQMEBAQDBQQEBAUFBQYHDAgHBwcHDwsLCQwRDxISEQ8RERMWHBcTFBoVEREYIRgaHR0fHx8TFyIkIh4kHB4fHv/bAEMBBQUFBwYHDggIDh4UERQeHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHv/AABEIAZABkAMBIgACEQEDEQH/xAAcAAEAAwADAQEAAAAAAAAAAAAABgcIAwQFAgH/xAA+EAEAAQMCAwUDCAcJAQAAAAAAAQIDBAURBgchEjFRYYFxkcETFBUiQUJSsQgjYnKhstEWMjM3U6Lh8PEk/8QAGwEBAQADAQEBAAAAAAAAAAAAAAYBAwUEBwL/xAAsEQEAAgEDAgQFBAMAAAAAAAAAAQIDBAURMUEGEhMhIjJRYXEUIzTRgaGx/9oADAMBAAIRAxEAPwD6AfUHy8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5hniQBlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfePZvZF+ixj2q7t2udqaKKZqqmfDb7Uk4H4K1bim/FWPT83waZ2uZVcfVjyp/FK9uEuEdE4ZsRTp+NFWRMbXMi59a5X6/Z7IcrXbti03w1+Kzq6Hasup+KfaqqOGOUutZ8U3tYu06ZYnaext27s+ndT6rH0bltwlptNMzp3zy7Hfcyapr39O5LxL6jc9Rnn3txH2U+n2vT4Y9q8/l1cbTdOxqIoxsDEs0x3RRZppiPdBk6bp2TRNGTgYl6me+K7NNUT74doeHz268vd6denEIhrPLbhLUqapjTvmd2e65jVTRt6dyuOJ+UutYEVXtHu06nYjeext2LsendV6L2Hu0+56jBMcW5j7vDqNr0+ePevE/ZkbIs3sa/XYyLVdq7RO1VFdM01RPht9j4ad4t4R0TiaxNOoY0U5ERtbyLf1blHr9vslRPHHBOrcLX5qv0/OMGqdreVRH1Z8qvwyqNDu2LU8Vt8Nkxrtqy6b4o96owA6rlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxeWPLq7rk29W1miu1pm+9u3vMVZH9KfzcnKTgH6YuW9b1i1MadRO9mzPT5eYn+WP4rypppopimiIpppiIiIjaI8vKE5uu7eTnDhn37yotq2n1P3s3TtDjxMaxiY1vGxbNFmxbjs0UUUxFNMeDlBLTMzPMqqIiI4gAYZAAAAHFl41jLxrmNlWaL1i5HZrorpiaao8HKMxMxPMMTETHEqI5ncuruhzc1bRqK7umb73Le8zVj/ANafyV013XTFVM01UxVTVExVTMbxMeHmo3m3wD9D3Lmt6PamdOrne9Zjr8hMz/LP8FTtW7efjDmn37Sld12nyfvYeneFbAKNOgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACacq+Da+J9U+c5dFUaXjVb3av8AUq/BH5z/AMo9wtomXxDrmPpeHTtXcneuuY6UUx31T/3wab0DSsPRNJx9MwbfYsWado8ap+2Z8ZnvcXd9w/T09Ok/FP8Ap2to2/8AUX9S/wAsO5ZtW7NqizZopt26IimimmNoiIju8n0CNmefeVlEce0ADDIAAAAAAAA+b1q3etV2b1FNy3XE0101RvExMd3m+hmJ494YmOfaWd+afBtfDOqfOcSiqdLyat7M/wClV+Cfh/whbV2v6Vh63pGRpmdR27F6nafGmfsmPCY72ZOKdEy+HtcyNLzKd67c70VxHSume6qP++Ky2jcP1FPTvPxR/tG7vt/6e/qU+WXmAO04oAAAAAAAAAAAAAAAAAAAAAAAAAAAACbcnuGvp7iejIybfawcHa7die6ur7tPn1jf082nUZ64Mc5Ldm7T4bZ8kY691m8nuFY0DQIzcu12dRzYiqveOtuj7tHl4z7fJOQfPs+a2fJOS3WX0HT4K4McY69gBpbgAAAAAAAAAAABBucPCsa/oE5uJa7WoYUTVb2jrco+9R5+MezzTkbcGa2DJGSvZp1GCufHOO3dkMTbnDw1Gg8T15GNb7ODnb3bUR3UVfep8u/f18kJfQtPnrnxxkr3fPtRhtgyTjt2AG5pAAAAAAAAAAAAAAAAAAAAAAAAAAIiZmIpiZmZ2iI75lpflpw/HDvCeLiXKIpyrsfLZE/b25+z0jaPRTPKDQvpvjKxVdt9rGwo+cXd+6Zifqx79p9JaLS+/wCq5tGGs9PeVRsGl4ic9o+0ACaUoAAAAAAAAAAAAAAACNcyuH44i4TysWiiKsq1Hy2PP29uPs9Y3j1ZomJiZiqJiYnaYnviWvGdOb+hfQnGV+q1b7ONmx84tbd0TM/Wj37z6wpdg1XFpw2nr7wmt/0vMRmr+JQ4BUJcAAAAAAAAAAAAAAAAAAAAAAAAB2dKw7uo6njYFmP1mRdpt0+W8x19zFrRWs2npDNaza0RHdenIzRqdO4P+kK6dr2oV/KTM98UUzMUx7O+fVP3DgYtrCwbGHYjs2rFum3RHhEREfBzPnWpzTmzWyT3fRdLhjDhrSOwA0N4AAAAAAAAAAAAAAAAgHPPRo1Hg/6Qt0739PufKRMd80VTEVR+U+ifuHPxbWdg38K/HatX7dVuuPGJiY+Lfps04c1ckdmjU4YzYbUnuySOzq2Fd07U8rAvRtcx7tVurz2mevxdZ9FraLVi0dJfOrVmszE9gBlgAAAAAAAAAAAAAAAAAAAAAATvkbps5vHFvKqp3owbVV6Z/amOzT69d/RBF2fo86f8lomoanVTtVkX4t0z400R/Wqfc5u7ZvS0tpjrPs6O1YfU1VY+nutABCLwAAAAAAAAAAAAAAAAAAABn7nlps4XHFzKpp2t51mm7E/tRHZn16b+qCLs/SG0/wCV0TT9Tpp3qx7826p8Ka4/rTHvUmu9pzerpa/WPZB7rh9PVWj6+4A6TnAAAAAAAAAAAAAAAAAAAAAADSfKfDnC5f6Vbmnaq5bm7VH71Uzv+TNlMTVMU0x1mYiIj7Zaz0jGpw9KxMSmNosWKLcbeVMR8E74hycY6UUXh6nOS93ZASirAAAAAAAAAAAAAAAAAAAARfmvhzm8v9VtxTvVbt03qY/dqid/zZraz1bGpzNKy8SqN4vWK7c7+dMx8WTKqZpqmmqNpiZiY8JVfh6/OO9Ep4hx8ZKXAFEnQAAAAAAAAAAAAAAAAAAAAAHf4asfOuItNx5jeLmXbpmPLtx/y1d3dzMnLOzF/j7Rbe28fOYmfSJn4NNyk/EFuctK/SFZ4erxivb6y/AE8oQAAAAAAAAAAAAAAAAAAAH7397KPEtj5rxHqWPttFvLuUxHl252+DV0MyczLMWOPtat7bR85mY9YifiofD1uMt4+sJ7xDXnFS33R0BWJMAAAAAAAAAAAAAAAAAAAAABLOUFPa5i6T+zXXP+yppBnLk3/mLpntufyS0aj9//AJEfj+1hsH8efz/QA4TugAAAAAAAAAAAAAAAAAAADN/N+ns8xdW6bb10T/spaQZy5yf5i6n7bf8AJDu+H/5E/j+nC3/+PH5/tEAFgjwAAAAAAAAAAAAAAAAAAAAAEq5R3It8xNI3+9cqp99FTSTLvAmR814z0e/M7RGXRG/tnb4tRz37JHxBX9+s/ZXeH7c4bR934A4DvgAAAAAAAAAAAAAAAAAAADNvNu5FzmJq/wCzdpp91FLScd+zLnHeR864z1i/vvvl1xv7J2+Dv+H6857T9nA8QW4w1j7vFAVyRAAAAAAAAAAAAAAAAAAAAAAcmNerx8m1fo6VWq4rj2xMT8Gs8O9Tk4lnItzvRdt010z4xMRPxZIaU5VZ/wBI8A6Xdmd67dubFflNEzG3uiE54hx80peFF4fy8ZL0+qUAJVVgAAAAAAAAAAAAAAAAAAAOLMvUY2Jeybk7UWqKq6p8IiJn4MmZN6rIybt+ud6rtc1z7ZmZ+LSPNXP+juAdUu01bV3LcWKPOa5iPymWalV4ex8Uvee6V8QZOb0pHYAUacAAAAAAAAAAAAAAAAAAAAAAFxfo8ar2rGpaLcq60zGRaifCfq1R+XvU6kPLjWY0LjHAza6uzYmv5K94dirp7omYn0eDctP6+mtXv1e7bs/oamtuWmw336xO8SIFfgAAAAAAAAAAAAAAAAAAG+3WZ2iAVL+kPqnZsaboturrVM5N2I8I6Ux+fuU6kPMfWY13jHPzbdXasRX8lZ8OxT090zEz6o8vttwehp614+6A3HP6+ptYAe94QAAAAAAAAAAAAAAAAAAAAAAAGjuU2vxr3CGPNy52svEj5C/E98zH92r1jb+KXM48qOJf7O8UW5v3Ozg5e1nJ37o6/Vq9Jnv8Jlo6J3iJiek9YmO6YQu66SdNnnjpPRc7Vq41GCOesADmOoAAAAAAAAAAAAAAAAIjzZ1+NB4QyJtXOzl5cfIWIjviZj61XpG/X2JdM7RMzPSOszPdEM481+Jf7RcUXJsXO1g4m9nH27p6/Wr9Zj3RDp7VpJ1OeOY9o6uXuurjT4J46yiIC6QwAAAAAAAAAAAAAAAAAAAAAAAAAAvbkpxbTq2lRoedd3zsOja3Mz/i2o/OY7vcol2dJz8vS9Rsahg3ZtZFirtUVR+U+MbdHh3DR11eKa946PdoNZbS5Yt27tZjwOBOJ8PinRaM2xMW8ijanIs79bdXxifs/wDXvoPJjtjtNbdYXePJXLWL16SAPw2AAAAAAAAAAAAAPA474nw+FtFrzb8xcyK96cezv1uVfCI+3/x+8eO2S0VrHvLXkyVxVm9uiMc6+LadJ0qdDwbv/wB2ZRtcmJ/wrU9/sme73qJdnVs/L1TUb+oZ12buRfq7VdU/lHhG3R1l5t+jrpcUV7z1Qmv1ltVlm/bsAPc8IAAAAAAAAAAAAAAAAAAAAAAAAAAAD1uE+IM/hvV7eo4FfWOly3P927T+GWjeEuI9O4l0qjOwLvWOl6zM/XtVeE/1Zcelw5rmpcP6nRqGmX5tXaelUT1prj8NUeDk7ltldXXzV9rf9dXbdztpLeW3ytVCJ8B8daXxRYps9qnG1KI3rxqqus+dE/ehLEZlxXxWml44mFnhzUzV89J5gAa20AAAAAAAABE+POOtL4XsVWe1Tk6lMb0Y1NXWPOufuw2YsV8topSOZlqzZqYa+e88Q9Pi7iPTuGdLqztQu9ZiYs2Yn692rwj+rOXFnEGfxJq9zUc+vrPS3bj+7ap/DDj4j1zUuINTrz9Tvzdu1dKYjpTRH4aY+yP+9XmrPbdsrpK+a3vb/iM3Lc7au3lr8oA6zlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPqzdu2b1N6zcrt3KJiaa6apiYnx8lo8Fc2crF+Tw+JKKsmzG0RlUR+sp/ej73tjr7VWDy6nR4tTXy5I/y9Om1eXTW82OWrtE1jS9axYydLzbOVanvmirrHlMd8ex3mStPzszT8mnJwcq9jX6e65br7M+zzjyT/AEDm5r2FFNvVLFjUrcdJrn9Xc29sdJ9yc1Ow5aTzinmFJpt+x34jLHEr2EC0jmxwtmUxGXXk4Fc98Xbc1U++ndJMLirhrNpicbXMCvfuib9NMz6VbS4+TSZ8XzUmHXx6zBkj4bw9kcNvMxLsRNvLsVxPdNNymYkuZmJaiZuZdiiI75quUxENPkt9G/z146uYeNm8VcNYVMzk65gUbd8RfpqmPSneUb1fmxwth0zGJXk59cd0Wrc00++rZux6TPl+Wky0ZNZgxx8V4T10db1jS9FxZydUzbOLajumurrPlEd8z5KX4g5ua9mxVb0qxZ023PSK4/WXPfPT+CAahnZmoZNWTnZV7Jv1d9y5X2p9nlHk6+m2HLfics+WHI1O/Y6RxijmVmca82crK+Uw+G6KsWzPScquI+Uq/dj7vtnr7FXXrt29eqvXrldy5XMzVXVVMzM+Pm+RS6bR4tNXy44/ym9TrMupt5skgD0vMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPx+gADHlhnzS/H6DLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//Z"},43:function(e,A,t){e.exports=t(77)},52:function(e,A,t){},77:function(e,A,t){"use strict";t.r(A);var a=t(0),n=t.n(a),r=t(21),s=t.n(r),c=t(3),i=(t(48),t(51),t(52),t(4)),u=t(5),m=t(7),l=t(6),o=t(2),d=t(42),p=t(20),f=t.n(p);function h(e,A,t){return new Promise((function(a,n){return f.a[e.toLowerCase()](A,t).then((function(e){return a(e.data)})).catch((function(e){return n(e.response.data.error)}))}))}f.a.defaults.baseURL="http://localhost:8080/api";var b=function(e){return{type:"ADD_ERROR",error:e}},g=function(){return{type:"REMOVE_ERROR"}};function E(e){return{type:"SET_CURRENT_USER",user:e}}function v(e){!function(e){e?f.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete f.a.defaults.headers.common.Authorization}(e)}var y=t(15),N=function(e){return{type:"LOAD_USERS",users:e}},O=function(){return function(e,A){var t=A().users;if(console.log(t),0===t.length)return h("get","/users").then((function(A){console.log("FETCH"),e(N(A))})).catch((function(A){e(b(A.message))}))}},j=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=A.call(this,e)).handleChange=function(e){a.setState({search:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.searchUsers(a.state.search),a.setState({search:""}),a.props.history.push("/users")},a.state={search:""},a}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state.search;return n.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-inline"},n.a.createElement("label",{htmlFor:"search"}),n.a.createElement("div",{className:"input-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"search",name:"search",onChange:this.handleChange,placeholder:"Search for friends",value:e}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{type:"submit",className:"btn btn-outline-light btn-sm"},"Search"))))}}]),t}(a.Component);var w=Object(o.b)((function(e){return{readings:e.readings}}),{searchUsers:function(e){return function(A){return h("get","/search/".concat(e)).then((function(e){A(N(e))})).catch((function(e){A(b(e.message))}))}}})(j),R=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(){var e;Object(i.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=A.call.apply(A,[this].concat(n))).logout=function(A){A.preventDefault(),e.props.logout(),e.props.history.push("/")},e.handleClick=function(A){A.preventDefault(),e.props.updateNotifications()},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchNotifications()}},{key:"render",value:function(){var e=this.props.notifications.map((function(e){return n.a.createElement("button",{key:e.subscriber_id,className:"dropdown-item"},n.a.createElement("span",{key:e.subscriber_id,className:"text-primary"},e.username)," started following you!")}));return n.a.createElement("nav",{className:"navbar fixed-top navbar-expand-md navbar-dark bg-dark"},n.a.createElement("div",{className:"container-fluid"},n.a.createElement(c.b,{className:"navbar-brand",to:"/"},"BREADS",n.a.createElement("small",null," beta")),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":".collapsable","aria-controls":"collapsable","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),this.props.currentUser.isAuthenticated?n.a.createElement("div",{className:"collapse navbar-collapse collapsable",id:"collapsable"},n.a.createElement(w,{history:this.props.history}),n.a.createElement("ul",{className:"nav navbar-nav m-auto"},n.a.createElement("li",null,n.a.createElement(c.c,{exact:!0,to:"/",activeClassName:"bg-primary text-white",className:"btn text-white btn-sm"},"Global")),n.a.createElement("li",null,n.a.createElement(c.c,{exact:!0,to:"/".concat(this.props.currentUser.user.id),activeClassName:"bg-primary text-white",className:"btn text-white btn-sm"},"Your Reads")),n.a.createElement("li",null,n.a.createElement(c.c,{exact:!0,to:"/subscriptions",activeClassName:"bg-primary text-white",className:"btn text-white btn-sm"},"Subscriptions"))),n.a.createElement("button",{className:"btn text-white btn-sm dropdown-toggle",type:"button",id:"navbarDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.length?n.a.createElement("span",{className:"badge badge-pill badge-danger"},e.length):n.a.createElement("span",{className:"badge badge-pill badge-primary"},e.length)),n.a.createElement("div",{onClick:this.handleClick,className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},e.length?e:n.a.createElement("button",{className:"dropdown-item"},"No new subscribers!")),n.a.createElement("button",{onClick:this.logout,className:"btn text-white btn-sm"},"Log out")):n.a.createElement("div",{className:"collapse navbar-collapse",id:"collapsable"},n.a.createElement("ul",{className:"nav navbar-nav ml-auto"},n.a.createElement("li",null,n.a.createElement(c.c,{exact:!0,to:"/signup",activeClassName:"bg-primary text-white",className:"btn text-white btn-sm"},"Sign up")),n.a.createElement("li",null,n.a.createElement(c.c,{exact:!0,to:"/signin",activeClassName:"bg-primary text-white",className:"btn text-white btn-sm"},"Log in"))))))}}]),t}(a.Component);var x=Object(y.f)(Object(o.b)((function(e){return{currentUser:e.currentUser,notifications:e.notifications}}),{logout:function(){return function(e){localStorage.clear(),v(!1),e(E({}))}},fetchNotifications:function(){return function(e,A){var t=A().currentUser.user.id;return h("get","/notifications/".concat(t)).then((function(A){e({type:"LOAD_NOTIFICATIONS",notifications:A})})).catch((function(A){e(b(A.message))}))}},updateNotifications:function(e){return function(A,t){var a=t().currentUser.user.id;return console.log(e),h("put","/notifications/".concat(a),a).then((function(e){})).catch((function(e){A(b(e.message))}))}}})(R)),U=function(e){return n.a.createElement("div",{className:"row"},e.children)},S=t(17),M=t.n(S),P=function(e){var A,t,a,r=e.id,s=e.image,i=e.username,u=e.readings,m=0,l={};if(u){for(var o in u[0])l[o]=u[0][o];a=r,r=l.user_id,l.image&&(s=l.image),l.username&&(i=l.username),u.forEach((function(e){m+=e.word_count/1e5})),A=n.a.createElement("p",{className:"card-text reading-sum"},"Readings: ",n.a.createElement("strong",null,u.length)),t=n.a.createElement("p",{className:"card-text book-sum"},"Loaves: ",n.a.createElement("strong",null,m.toFixed(2)))}return n.a.createElement("aside",{className:"col-lg-3 col-sm-10 offset-sm-1 offset-lg-0"},n.a.createElement("div",{className:"card"},n.a.createElement("img",{src:s||M.a,alt:i,className:"img-thumbnail"}),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},i),a===r&&n.a.createElement(c.c,{exact:!0,to:"/".concat(r,"/pubs"),activeClassName:"badge badge-primary",className:"badge"},"Subscriptions"),A,t)))},T=function(e){return{type:"LOAD_READINGS",readings:e}},D=function(){return function(e){return h("get","/readings").then((function(A){e(T(A))})).catch((function(A){e(b(A.message))}))}},H=function(){return{type:"REMOVE_SUMMARY"}},V=function(e){return function(A){return h("get","/summary/".concat(e)).then((function(e){A({type:"LOAD_SUMMARY",summary:e})})).catch((function(e){A(b(e.message))}))}},z=function(e){return n.a.createElement("div",{className:"col-lg-6 col-sm-10 offset-sm-1 offset-lg-0"},e.list_data?n.a.createElement("div",{className:e.display,id:"list_data"},e.list_data):n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading..."))))},C=function(e){return n.a.createElement("li",{className:"list-group-item"},n.a.createElement("h5",{className:"row"},n.a.createElement("a",{href:"".concat(e.url),target:"_blank",rel:"noopener noreferrer",className:".text-dark"},e.title)),n.a.createElement("div",{className:"row reading-area"},n.a.createElement("p",{className:"lead"},e.domain),n.a.createElement("p",{className:"text-muted ml-auto"},"~",Number(e.word_count).toLocaleString()," words")),n.a.createElement("div",{className:"row"},n.a.createElement("img",{src:e.image||M.a,alt:e.username,height:"100",width:"100",className:"timeline-image"}),n.a.createElement(c.b,{to:"/".concat(e.user_id)},n.a.createElement("p",{className:"btn text-primary m-2"},n.a.createElement("small",null,e.username))),n.a.createElement("p",{onClick:e.newSubscription,className:"btn text-muted m-2 subscribe"},n.a.createElement("small",null,"Subscribe")),""===e.summary||e.summary.id!=e.id?n.a.createElement("p",{onClick:e.viewSummary,className:"btn text-muted m-2 ml-auto"},n.a.createElement("small",null,"View Summary")):n.a.createElement("p",{onClick:e.removeSummary,className:"btn text-muted m-2 ml-auto"},n.a.createElement("small",null,"Remove Summary")),e.isCorrectUser&&n.a.createElement("p",{onClick:e.removeReading,className:"btn text-danger m-2 delete"},n.a.createElement("small",null,"Delete")),e.summary.id==e.id&&n.a.createElement("p",{className:"summary-data"},e.summary.data)))},B=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(){return Object(i.a)(this,t),A.apply(this,arguments)}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchReadings()}},{key:"render",value:function(){var e=this,A=this.props,t=A.readings,a=A.summary,r=A.fetchSummary,s=A.removeSummary,c=A.postNewSubscription,i=t.map((function(A){return n.a.createElement(C,{key:A.id,id:A.id,title:A.title,domain:A.domain,url:A.url,word_count:A.word_count,user_id:A.user_id,username:A.username,image:A.image,summary:a.summary,viewSummary:r.bind(e,A.id,A.article_url),removeSummary:s,newSubscription:c.bind(e,A.user_id)})}));return n.a.createElement(z,{list_data:i,display:"list-group"})}}]),t}(a.Component);var k=Object(o.b)((function(e){return{readings:e.readings,summary:e.summary}}),{fetchReadings:D,fetchSummary:V,removeSummary:H,fetchUsers:O,postNewSubscription:function(e){return function(A,t){return h("post","/subscribe",{sub_id:t().currentUser.user.id,pub_id:e}).then((function(e){})).catch((function(e){return A(b(e.message))}))}}})(B),Z=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=A.call(this,e)).handleChange=function(e){a.setState({url:e.target.value})},a.handleNewUrl=function(e){e.preventDefault(),a.props.postNewReading(a.state.url),a.setState({url:""}),a.props.history.push("/")},a.state={url:""},a}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state.url;return n.a.createElement("aside",{className:"col-lg-3 col-md-10 offset-sm-1 offset-lg-0"},n.a.createElement("form",{onSubmit:this.handleNewUrl,className:"form-inline"},n.a.createElement("label",{htmlFor:"url"}),n.a.createElement("div",{className:"input-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"url",name:"url",onChange:this.handleChange,placeholder:"www.coolarticle.com",value:e}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-sm"},"Submit")))))}}]),t}(a.Component);var L=Object(o.b)((function(e){return{readings:e.readings}}),{postNewReading:function(e){return function(A,t){var a=t().currentUser.user.id;return h("post","/users/".concat(a,"/readings"),{url:e}).then((function(e){})).catch((function(e){return A(b(e.message))}))}},fetchReadings:D})(Z),F=function(e){return e.currentUser.isAuthenticated?n.a.createElement("div",null,e.errors.message&&n.a.createElement("div",{className:"alert alert-danger"},e.errors.message),n.a.createElement(U,null,n.a.createElement(P,{id:e.currentUser.user.id,image:e.currentUser.user.image,username:e.currentUser.user.username}),n.a.createElement(k,null),n.a.createElement(L,{history:e.history}))):n.a.createElement("div",{className:"home-hero"},n.a.createElement("h1",null,"What's Happening?"),n.a.createElement("h4",null,"New to READINGS?"),n.a.createElement(c.b,{to:"/signup",className:"btn btn-primary"},"Sign up here"))},Y=t(23),I=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=A.call(this,e)).handleChange=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var A=a.props.signup?"signup":"signin";a.props.onAuth(A,a.state).then((function(){a.props.history.push("/")})).catch((function(){}))},a.state={first_name:"",last_name:"",email:"",username:"",password:"",image:""},a}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state,A=e.first_name,t=e.last_name,a=e.email,r=e.username,s=e.password,c=e.image,i=this.props,u=i.heading,m=i.buttonText,l=i.signup,o=i.errors,d=i.history,p=i.removeError;return d.listen((function(){p()})),n.a.createElement("div",null,n.a.createElement("div",{className:"row justify-content-md-center text-center"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("h2",null,u),o.message&&n.a.createElement("div",{className:"alert alert-danger"},o.message),l&&n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"first_name"},"First Name:"),n.a.createElement("input",{autoComplete:"off",className:"form-control",id:"first_name",name:"first_name",onChange:this.handleChange,type:"text",value:A}),n.a.createElement("label",{htmlFor:"last_name"},"Last Name:"),n.a.createElement("input",{autoComplete:"off",className:"form-control",id:"last_name",name:"last_name",onChange:this.handleChange,type:"text",value:t}),n.a.createElement("label",{htmlFor:"email"},"E-mail:"),n.a.createElement("input",{autoComplete:"off",className:"form-control",id:"email",name:"email",onChange:this.handleChange,type:"text",value:a}),n.a.createElement("label",{htmlFor:"image"},"Image:"),n.a.createElement("input",{autoComplete:"off",className:"form-control",id:"image",name:"image",onChange:this.handleChange,type:"text",value:c})),n.a.createElement("label",{htmlFor:"username"},"Username:"),n.a.createElement("input",{autoComplete:"off",className:"form-control",id:"username",name:"username",onChange:this.handleChange,type:"text",value:r}),n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{autoComplete:"off",className:"form-control",id:"password",name:"password",onChange:this.handleChange,type:"password",value:s}),n.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-lg"},m)))))}}]),t}(a.Component),X=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(){return Object(i.a)(this,t),A.apply(this,arguments)}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserReadings(this.props.match.params.id)}},{key:"render",value:function(){var e=this,A=this.props,t=A.readings,a=A.removeReading,r=A.summary,s=A.fetchSummary,c=A.removeSummary,i=A.currentUser,u=t.map((function(A){return n.a.createElement(C,{key:A.id,id:A.id,title:A.title,domain:A.domain,url:A.url,word_count:A.word_count,user_id:A.user_id,username:A.username,image:A.image,summary:r.summary,viewSummary:s.bind(e,A.id,A.article_url),removeSummary:c,removeReading:a.bind(e,A.user_id,A.id),isCorrectUser:i===A.user_id})}));return n.a.createElement(z,{list_data:u,display:"list-group"})}}]),t}(a.Component);var q=Object(o.b)((function(e){return{readings:e.readings,summary:e.summary,currentUser:e.currentUser.user.id}}),{fetchUserReadings:function(e){return function(A,t){return h("get","/readings/".concat(e)).then((function(e){A(T(e))})).catch((function(e){A(b(e.message))}))}},fetchSummary:V,removeReading:function(e,A){return function(t){return h("delete","/users/".concat(e,"/readings/").concat(A)).then((function(){return t({type:"REMOVE_READING",id:A})})).catch((function(e){t(b(e.message))}))}},removeSummary:H})(X),W=function(e){return n.a.createElement("div",{className:"card"},n.a.createElement("img",{src:e.image||M.a,alt:e.username,className:"img-thumbnail"}),n.a.createElement("div",{className:"card-body"},n.a.createElement(c.b,{to:"/".concat(e.id)},n.a.createElement("h5",{className:"card-title"},e.username)),e.first," ",e.last,n.a.createElement(c.b,{to:"/".concat(e.id,"/pubs")},n.a.createElement("p",null,"Subscriptions")),"yes"===e.pubs&&n.a.createElement("small",{onClick:e.removeSubscription,className:"text-danger unsubscribe"},"Unsubscribe")))},_=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(){return Object(i.a)(this,t),A.apply(this,arguments)}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPubs(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.props.fetchPubs(this.props.match.params.id)}},{key:"render",value:function(){var e,A=this,t=this.props,a=t.users,r=t.removeSubscription,s=t.currentUser,c=t.match;return e=a.map((function(e){return n.a.createElement(W,{key:e.id,id:e.id,first:e.first_name,last:e.last_name,username:e.username,image:e.image,removeSubscription:r.bind(A,s,e.id),pubs:s==c.params.id?"yes":"no"})})),n.a.createElement(z,{list_data:e,display:"card-columns"})}}]),t}(a.Component);var J=Object(o.b)((function(e){return{users:e.users,currentUser:e.currentUser.user.id}}),{fetchPubs:function(e){return function(A){return h("get","/users/".concat(e)).then((function(e){A(N(e))})).catch((function(e){A(b(e.message))}))}},removeSubscription:function(e,A){return function(t){return h("delete","/users/".concat(e,"/subscriptions/").concat(A)).then((function(){return t({type:"REMOVE_SUBSCRIPTION",id:A})})).catch((function(e){t(b(e.message))}))}}})(_),Q=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(){return Object(i.a)(this,t),A.apply(this,arguments)}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchSubscriptions()}},{key:"render",value:function(){var e=this,A=this.props,t=A.subscriptions,a=A.summary,r=A.fetchSummary,s=A.removeSummary,c=t.map((function(A){return n.a.createElement(C,{key:A.id,reading_id:A.id,title:A.title,domain:A.domain,url:A.url,word_count:A.word_count,username:A.username,image:A.image,user_id:A.user_id,summary:a.summary,viewSummary:r.bind(e,A.id,A.url),removeSummary:s})}));return n.a.createElement(z,{list_data:c,display:"list-group"})}}]),t}(a.Component);var G=Object(o.b)((function(e){return{subscriptions:e.subscriptions,summary:e.summary}}),{fetchSubscriptions:function(){return function(e,A){var t=A().currentUser.user.id;return h("get","/subscriptions/".concat(t)).then((function(A){e({type:"LOAD_SUBSCRIPTIONS",subscriptions:A})})).catch((function(A){e(b(A.message))}))}},fetchSummary:V,removeSummary:H})(Q),K=function(e){Object(m.a)(t,e);var A=Object(l.a)(t);function t(){return Object(i.a)(this,t),A.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props.users.map((function(e){return n.a.createElement(W,{key:e.id,id:e.id,first:e.first_name,last:e.last_name,username:e.username,image:e.image})}));return n.a.createElement(z,{list_data:e,display:"card-columns"})}}]),t}(a.Component);var $=Object(o.b)((function(e){return{users:e.users}}),{fetchUsers:O})(K);var ee=Object(y.f)(Object(o.b)((function(e){return{currentUser:e.currentUser,errors:e.errors,readings:e.readings}}),{authUser:function(e,A){return function(t){return new Promise((function(a,n){return h("post","/auth/".concat(e),A).then((function(e){var A=e.token,n=Object(d.a)(e,["token"]);localStorage.setItem("jwtToken",A),v(A),t(E(n)),t({type:"REMOVE_ERROR"}),a()})).catch((function(e){t(b(e.message)),n()}))}))}},removeError:g})((function(e){var A=e.authUser,t=e.errors,a=e.removeError,r=e.currentUser,s=e.readings;return n.a.createElement(y.c,null,n.a.createElement(y.a,{exact:!0,path:"/",render:function(e){return n.a.createElement(F,Object.assign({errors:t,currentUser:r},e))}}),n.a.createElement(y.a,{exact:!0,path:"/signin",render:function(e){return n.a.createElement(I,Object.assign({onAuth:A,removeError:a,errors:t,buttonText:"Log In",heading:"Welcome Back."},e))}}),n.a.createElement(y.a,{exact:!0,path:"/signup",render:function(e){return n.a.createElement(I,Object.assign({onAuth:A,removeError:a,errors:t,signup:!0,buttonText:"Sign up",heading:"Join today!"},e))}}),n.a.createElement(y.a,{exact:!0,path:"/users",render:function(e){return n.a.createElement("div",null,t.message&&n.a.createElement("div",{className:"alert alert-danger"},t.message),n.a.createElement(U,null,n.a.createElement(P,{id:r.user.id,image:r.user.image,username:r.user.username}),n.a.createElement($,null)))}}),n.a.createElement(y.a,{exact:!0,path:"/subscriptions",render:function(e){return n.a.createElement("div",null,t.message&&n.a.createElement("div",{className:"alert alert-danger"},t.message),n.a.createElement(U,null,n.a.createElement(P,{id:r.user.id,image:r.user.image,username:r.user.username}),n.a.createElement(G,null),n.a.createElement(L,{history:e.history})))}}),n.a.createElement(y.a,{exact:!0,path:"/:id",render:function(e){return n.a.createElement("div",null,t.message&&n.a.createElement("div",{className:"alert alert-danger"},t.message),n.a.createElement(U,null,n.a.createElement(P,{id:r.user.id,image:r.user.image,username:r.user.username,readings:s}),n.a.createElement(q,{match:e.match}),n.a.createElement(L,{history:e.history})))}}),n.a.createElement(y.a,{exact:!0,path:"/:id/pubs",render:function(e){return n.a.createElement("div",null,t.message&&n.a.createElement("div",{className:"alert alert-danger"},t.message),n.a.createElement(U,null,n.a.createElement(P,{id:r.user.id,image:r.user.image,username:r.user.username}),n.a.createElement(J,{match:e.match})))}}))}))),Ae=function(e){return n.a.createElement("div",{className:"container-fluid py-5"},n.a.createElement(ee,null))},te=t(14),ae={isAuthenticated:!1,user:{}},ne=t(18),re=t(13),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"LOAD_READINGS":return Object(re.a)(A.readings);case"REMOVE_READING":return e.filter((function(e){return e.id!==A.id}));default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{summary:""},A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"LOAD_SUMMARY":return Object(ne.a)({},e,{summary:A.summary});case"REMOVE_SUMMARY":return Object(ne.a)({},e,{summary:""});default:return e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"LOAD_USERS":return Object(re.a)(A.users);default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"LOAD_SUBSCRIPTIONS":return Object(re.a)(A.subscriptions);case"REMOVE_SUBSCRIPTION":return e.filter((function(e){return e.id!==A.id}));default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"LOAD_NOTIFICATIONS":return Object(re.a)(A.notifications);default:return e}},le=Object(te.c)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_CURRENT_USER":return{isAuthenticated:!!Object.keys(A.user).length,user:A.user};default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"ADD_ERROR":return Object(ne.a)({},e,{message:A.error});case"REMOVE_ERROR":return Object(ne.a)({},e,{message:null});default:return e}},readings:se,summary:ce,users:ie,subscriptions:ue,notifications:me}),oe=t(40);var de=t(41),pe=t.n(de),fe=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.d;return Object(te.e)(le,e(Object(te.a)(oe.a)))}();if(localStorage.jwtToken){v(localStorage.jwtToken);try{fe.dispatch(E(pe()(localStorage.jwtToken)))}catch(be){fe.dispatch(E({}))}}var he=function(){return n.a.createElement(o.a,{store:fe},n.a.createElement("div",{className:"onboarding"},n.a.createElement(x,null),n.a.createElement(Ae,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(c.a,null,n.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.0cdba4e6.chunk.js.map